<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>JSON和模型之间转换iOS框架：MJExtension | Grx博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="MJExtension是一套字典和模型之间互相转换的超轻量级框架 MJExtension能完成的功能字典（JSON）–&gt;模型（Model）模型（Model）–&gt;字典（JSON）字典数组（JSON Array）–&gt;模型数组（Model Array）模型数组（Model Array）–&gt;字典数组（JSON Array）">
<meta property="og:type" content="article">
<meta property="og:title" content="JSON和模型之间转换iOS框架：MJExtension">
<meta property="og:url" content="https://github.com/2015/01/18/JSON%E5%92%8C%E6%A8%A1%E5%9E%8B%E4%B9%8B%E9%97%B4%E8%BD%AC%E6%8D%A2iOS%E6%A1%86%E6%9E%B6%EF%BC%9AMJExtension/index.html">
<meta property="og:site_name" content="Grx博客">
<meta property="og:description" content="MJExtension是一套字典和模型之间互相转换的超轻量级框架 MJExtension能完成的功能字典（JSON）–&gt;模型（Model）模型（Model）–&gt;字典（JSON）字典数组（JSON Array）–&gt;模型数组（Model Array）模型数组（Model Array）–&gt;字典数组（JSON Array）">
<meta property="og:locale">
<meta property="article:published_time" content="2015-01-18T08:08:03.000Z">
<meta property="article:modified_time" content="2016-05-18T09:13:39.000Z">
<meta property="article:author" content="Grx">
<meta property="article:tag" content="OC">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Grx博客" type="application/atom+xml">
  
  
  
<link rel="stylesheet" href="/ruixiaoguo/Grx.github.io.git/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/icon.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Grx</a></h1>
		</hgroup>

		
		<p class="header-subtitle">自我管理，知识管理，时间管理，阅读，语音写作，思维导图</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/ruixiaoguo/Grx.github.io.git/">主页</a></li>
				        
							<li><a href="/ruixiaoguo/Grx.github.io.git/tags/life">随笔</a></li>
				        
							<li><a href="/ruixiaoguo/Grx.github.io.git/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/ruixiaoguo" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="https://weibo.com/u/3984935859?refer_flag=1005055010_" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/grx0917" title="zhihu">zhihu</a>
					        
								<a class="linkedin" target="_blank" href="https://juejin.cn" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/ruixiaoguo/Grx.github.io.git/tags/OC/" style="font-size: 10px;">-OC</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/Android/" style="font-size: 10px;">Android</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/Apple-Watch/" style="font-size: 10px;">Apple Watch</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/Fastlane/" style="font-size: 13.33px;">Fastlane</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/Flutter/" style="font-size: 15px;">Flutter</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/Google/" style="font-size: 13.33px;">Google</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/Life/" style="font-size: 10px;">Life</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/Lottie/" style="font-size: 10px;">Lottie</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/MMKV/" style="font-size: 10px;">MMKV</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/Mac/" style="font-size: 11.67px;">Mac</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/MonkeyKing/" style="font-size: 10px;">MonkeyKing</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/OC/" style="font-size: 20px;">OC</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/PHP/" style="font-size: 11.67px;">PHP</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/RAC/" style="font-size: 11.67px;">RAC</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/RN/" style="font-size: 10px;">RN</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/Swift/" style="font-size: 16.67px;">Swift</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/WKWebView/" style="font-size: 10px;">WKWebView</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/WebView/" style="font-size: 10px;">WebView</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/Xcode/" style="font-size: 15px;">Xcode</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/appledoc/" style="font-size: 10px;">appledoc</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/cocos2d/" style="font-size: 10px;">cocos2d</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/hexo/" style="font-size: 11.67px;">hexo</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/ios/" style="font-size: 10px;">ios</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/life/" style="font-size: 18.33px;">life</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/xcode/" style="font-size: 11.67px;">xcode</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/" style="font-size: 15px;">智能家居</a> <a href="/ruixiaoguo/Grx.github.io.git/tags/%E9%80%86%E5%90%91/" style="font-size: 15px;">逆向</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.devtang.com">唐巧的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://beyondvincent.com">破船之家</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://limboy.me">无网不剩</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://msching.github.io">码农人生</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://yulingtianxia.com">玉令天下</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.leichunfeng.com">雷纯锋的技术博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://jax.cnblogs.com">包建强</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.cnbang.net">bang</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Grx</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/img/icon.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Grx</h1>
			</hgroup>
			
			<p class="header-subtitle">自我管理，知识管理，时间管理，阅读，语音写作，思维导图</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/ruixiaoguo/Grx.github.io.git/">主页</a></li>
		        
					<li><a href="/ruixiaoguo/Grx.github.io.git/tags/life">随笔</a></li>
		        
					<li><a href="/ruixiaoguo/Grx.github.io.git/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/ruixiaoguo" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="https://weibo.com/u/3984935859?refer_flag=1005055010_" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/grx0917" title="zhihu">zhihu</a>
			        
						<a class="linkedin" target="_blank" href="https://juejin.cn" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-JSON和模型之间转换iOS框架：MJExtension" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/ruixiaoguo/Grx.github.io.git/2015/01/18/JSON%E5%92%8C%E6%A8%A1%E5%9E%8B%E4%B9%8B%E9%97%B4%E8%BD%AC%E6%8D%A2iOS%E6%A1%86%E6%9E%B6%EF%BC%9AMJExtension/" class="article-date">
  	<time datetime="2015-01-18T08:08:03.000Z" itemprop="datePublished">2015-01-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      JSON和模型之间转换iOS框架：MJExtension
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/ruixiaoguo/Grx.github.io.git/tags/OC/" rel="tag">OC</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="MJExtension是一套字典和模型之间互相转换的超轻量级框架-MJExtension能完成的功能"><a href="#MJExtension是一套字典和模型之间互相转换的超轻量级框架-MJExtension能完成的功能" class="headerlink" title="MJExtension是一套字典和模型之间互相转换的超轻量级框架 MJExtension能完成的功能"></a>MJExtension是一套字典和模型之间互相转换的超轻量级框架 MJExtension能完成的功能</h5><p>字典（JSON）–&gt;模型（Model）<br>模型（Model）–&gt;字典（JSON）<br>字典数组（JSON Array）–&gt;模型数组（Model Array）<br>模型数组（Model Array）–&gt;字典数组（JSON Array）</p>
<span id="more"></span>

<ul>
<li><a href="#1">Getting Started 【开始使用】</a><ul>
<li><a href="#1.1">Features 【能做什么】</a></li>
<li><a href="#1.2">Installation 【安装】</a></li>
</ul>
</li>
<li><a href="#2">Examples 【示例】</a><ul>
<li><a href="#2.1">JSON -&gt; Model</a></li>
<li><a href="#2.2">JSONString -&gt; Model</a></li>
<li><a href="#2.3">Model contains model</a></li>
<li><a href="#2.4">Model contains model-array</a></li>
<li><a href="#2.5">Model name - JSON key mapping</a></li>
<li><a href="#2.6">JSON array -&gt; model array</a></li>
<li><a href="#2.7">Model -&gt; JSON</a></li>
<li><a href="#2.8">Model array -&gt; JSON array</a></li>
<li><a href="#2.9">Core Data</a></li>
<li><a href="2.10">Coding</a></li>
<li><a href="#2.11">Camel -&gt; underline</a></li>
<li><a href="#2.12">NSString -&gt; NSDate, nil -&gt; @””</a></li>
<li><a href="#2.13">More use cases</a></li>
</ul>
</li>
</ul>
<h2 id="1">Getting Started【开始使用】</h2>
<h3 id="1.1">Features【能做什么】</h3>
  * MJExtension是一套字典和模型之间互相转换的超轻量级框架
  * JSON --> Model、Core Data Model
  * JSONString --> Model、Core Data Model
  * Model、Core Data Model --> JSON
  * JSON Array --> Model Array、Core Data Model Array
  * JSONString --> Model Array、Core Data Model Array
  * Model Array、Core Data Model Array --> JSON Array
  * Coding all properties of model in one line code.
    * 只需要一行代码，就能实现模型的所有属性进行Coding（归档和解档）
    
<h3 id="1.2"> Installation【安装】</h3>
<h4>From CocoaPods【使用CocoaPods】</h4>

<pre><code>   pod &#39;MJExtension&#39;
   
</code></pre>
<h4>Manually【手动导入】</h4>

<ul>
<li><p>Drag all source files under floder MJExtension to your project.【将MJExtension文件夹中的所有源代码拽入项目中】</p>
</li>
<li><p>Import the main header file：#import “MJExtension.h”【导入主头文件：#import “MJExtension.h”】</p>
<pre><code>   MJExtension.h
   MJConst.h               MJConst.m
   MJFoundation.h          MJFoundation.m
   MJProperty.h            MJProperty.m
   MJType.h                MJType.m
   NSObject+MJCoding.h     NSObject+MJCoding.m
   NSObject+MJProperty.h   NSObject+MJProperty.m
   NSObject+MJKeyValue.h   NSObject+MJKeyValue.m
</code></pre>
</li>
</ul>
<h2 id="2"> Examples【示例】</h2>
---

<h4 id="2.1">The most simple JSON -> Model【最简单的字典转模型】</h4>

<pre><code>   typedef enum &#123;
       SexMale,
       SexFemale
   &#125; Sex;

  @interface User : NSObject
  @property (copy, nonatomic) NSString *name;
  @property (copy, nonatomic) NSString *icon;
  @property (assign, nonatomic) unsigned int age;
  @property (copy, nonatomic) NSString *height;
  @property (strong, nonatomic) NSNumber *money;
  @property (assign, nonatomic) Sex sex;
  @property (assign, nonatomic, getter=isGay) BOOL gay;
  @end

  /***********************************************/

  NSDictionary *dict = @&#123;
      @&quot;name&quot; : @&quot;Jack&quot;,
      @&quot;icon&quot; : @&quot;lufy.png&quot;,
      @&quot;age&quot; : @20,
      @&quot;height&quot; : @&quot;1.55&quot;,
      @&quot;money&quot; : @100.9,
      @&quot;sex&quot; : @(SexFemale),
      @&quot;gay&quot; : @&quot;true&quot;
 //   @&quot;gay&quot; : @&quot;1&quot;
 //   @&quot;gay&quot; : @&quot;NO&quot;
 &#125;;

 // JSON -&gt; User
User *user = [User mj_objectWithKeyValues:dict];

NSLog(@&quot;name=%@, icon=%@, age=%zd, height=%@, money=%@, sex=%d, gay=%d&quot;, user.name, user.icon, user.age, user.height, user.money, user.sex, user.gay);
// name=Jack, icon=lufy.png, age=20, height=1.550000, money=100.9, sex=1
</code></pre>
<h4 id="2.2">JSONString -> Model【JSON字符串转模型】</h4>

<pre><code>   // 1.Define a JSONString
   NSString *jsonString = @&quot;&#123;\&quot;name\&quot;:\&quot;Jack\&quot;, \&quot;icon\&quot;:\&quot;lufy.png\&quot;, \&quot;age\&quot;:      20&#125;&quot;;

   // 2.JSONString -&gt; User
   User *user = [User mj_objectWithKeyValues:jsonString];

   // 3.Print user&#39;s properties
   NSLog(@&quot;name=%@, icon=%@, age=%d&quot;, user.name, user.icon, user.age);
   // name=Jack, icon=lufy.png, age=20
</code></pre>
<h4 id="2.3">Model contains model【模型中嵌套模型】</h4>

<pre><code>   @interface Status : NSObject
   @property (copy, nonatomic) NSString *text;
   @property (strong, nonatomic) User *user;
   @property (strong, nonatomic) Status *retweetedStatus;
   @end

   /***********************************************/

   NSDictionary *dict = @&#123;
   @&quot;text&quot; : @&quot;Agree!Nice weather!&quot;,
   @&quot;user&quot; : @&#123;
       @&quot;name&quot; : @&quot;Jack&quot;,
       @&quot;icon&quot; : @&quot;lufy.png&quot;
   &#125;,
   @&quot;retweetedStatus&quot; : @&#123;
       @&quot;text&quot; : @&quot;Nice weather!&quot;,
       @&quot;user&quot; : @&#123;
           @&quot;name&quot; : @&quot;Rose&quot;,
           @&quot;icon&quot; : @&quot;nami.png&quot;
       &#125;
   &#125;
   &#125;;

   // JSON -&gt; Status
   Status *status = [Status mj_objectWithKeyValues:dict];

   NSString *text = status.text;
   NSString *name = status.user.name;
   NSString *icon = status.user.icon;
   NSLog(@&quot;text=%@, name=%@, icon=%@&quot;, text, name, icon);
   // text=Agree!Nice weather!, name=Jack, icon=lufy.png

   NSString *text2 = status.retweetedStatus.text;
   NSString *name2 = status.retweetedStatus.user.name;
   NSString *icon2 = status.retweetedStatus.user.icon;
   NSLog(@&quot;text2=%@, name2=%@, icon2=%@&quot;, text2, name2, icon2);
   // text2=Nice weather!, name2=Rose, icon2=nami.png
</code></pre>
<h4 id="2.4">Model contains model-array【模型中有个数组属性，数组里面又要装着其他模型】</h4>

<pre><code>   @interface Ad : NSObject
   @property (copy, nonatomic) NSString *image;
   @property (copy, nonatomic) NSString *url;
   @end

   @interface StatusResult : NSObject
   /** Contatins status model */
   @property (strong, nonatomic) NSMutableArray *statuses;
   /** Contatins ad model */
   @property (strong, nonatomic) NSArray *ads;
   @property (strong, nonatomic) NSNumber *totalNumber;
   @end

   /***********************************************/

   // Tell MJExtension what type model will be contained in statuses and ads.
   [StatusResult mj_setupObjectClassInArray:^NSDictionary *&#123;
   return @&#123;
              @&quot;statuses&quot; : @&quot;Status&quot;,
              // @&quot;statuses&quot; : [Status class],
              @&quot;ads&quot; : @&quot;Ad&quot;
              // @&quot;ads&quot; : [Ad class]
          &#125;;
   &#125;];
   // Equals: StatusResult.m implements +mj_objectClassInArray method.

   NSDictionary *dict = @&#123;
   @&quot;statuses&quot; : @[
                     @&#123;
                         @&quot;text&quot; : @&quot;Nice weather!&quot;,
                         @&quot;user&quot; : @&#123;
                             @&quot;name&quot; : @&quot;Rose&quot;,
                             @&quot;icon&quot; : @&quot;nami.png&quot;
                         &#125;
                     &#125;,
                     @&#123;
                         @&quot;text&quot; : @&quot;Go camping tomorrow!&quot;,
                         @&quot;user&quot; : @&#123;
                             @&quot;name&quot; : @&quot;Jack&quot;,
                             @&quot;icon&quot; : @&quot;lufy.png&quot;
                         &#125;
                     &#125;
                 ],
   @&quot;ads&quot; : @[
                @&#123;
                    @&quot;image&quot; : @&quot;ad01.png&quot;,
                    @&quot;url&quot; : @&quot;http://www.ad01.com&quot;
                &#125;,
                @&#123;
                    @&quot;image&quot; : @&quot;ad02.png&quot;,
                    @&quot;url&quot; : @&quot;http://www.ad02.com&quot;
                &#125;
            ],
   @&quot;totalNumber&quot; : @&quot;2014&quot;
   &#125;;

   // JSON -&gt; StatusResult
   StatusResult *result = [StatusResult mj_objectWithKeyValues:dict];

   NSLog(@&quot;totalNumber=%@&quot;, result.totalNumber);
   // totalNumber=2014

   // Printing
   for (Status *status in result.statuses) &#123;
   NSString *text = status.text;
   NSString *name = status.user.name;
   NSString *icon = status.user.icon;
   NSLog(@&quot;text=%@, name=%@, icon=%@&quot;, text, name, icon);
   &#125;
   // text=Nice weather!, name=Rose, icon=nami.png
   // text=Go camping tomorrow!, name=Jack, icon=lufy.png

   // Printing
   for (Ad *ad in result.ads) &#123;
   NSLog(@&quot;image=%@, url=%@&quot;, ad.image, ad.url);
   &#125;
   // image=ad01.png, url=http://www.ad01.com
   // image=ad02.png, url=http://www.ad02.com
</code></pre>
<h4 id="2.5">Model name - JSON key mapping【模型中的属性名和字典中的key不相同(或者需要多级映射)】</h4>

<pre><code>   @interface Bag : NSObject
   @property (copy, nonatomic) NSString *name;
   @property (assign, nonatomic) double price;
   @end

   @interface Student : NSObject
   @property (copy, nonatomic) NSString *ID;
   @property (copy, nonatomic) NSString *desc;
   @property (copy, nonatomic) NSString *nowName;
   @property (copy, nonatomic) NSString *oldName;
   @property (copy, nonatomic) NSString *nameChangedTime;
   @property (strong, nonatomic) Bag *bag;
   @end

   /***********************************************/

   // How to map
   [Student mj_setupReplacedKeyFromPropertyName:^NSDictionary *&#123;
   return @&#123;
              @&quot;ID&quot; : @&quot;id&quot;,
              @&quot;desc&quot; : @&quot;desciption&quot;,
              @&quot;oldName&quot; : @&quot;name.oldName&quot;,
              @&quot;nowName&quot; : @&quot;name.newName&quot;,
              @&quot;nameChangedTime&quot; : @&quot;name.info[1].nameChangedTime&quot;,
              @&quot;bag&quot; : @&quot;other.bag&quot;
          &#125;;
   &#125;];
   // Equals: Student.m implements +mj_replacedKeyFromPropertyName method.

   NSDictionary *dict = @&#123;
   @&quot;id&quot; : @&quot;20&quot;,
   @&quot;desciption&quot; : @&quot;kids&quot;,
   @&quot;name&quot; : @&#123;
       @&quot;newName&quot; : @&quot;lufy&quot;,
       @&quot;oldName&quot; : @&quot;kitty&quot;,
       @&quot;info&quot; : @[
                @&quot;test-data&quot;,
                @&#123;
                        @&quot;nameChangedTime&quot; : @&quot;2013-08&quot;
                  &#125;
              ]
   &#125;,
   @&quot;other&quot; : @&#123;
       @&quot;bag&quot; : @&#123;
           @&quot;name&quot; : @&quot;a red bag&quot;,
           @&quot;price&quot; : @100.7
       &#125;
   &#125;
   &#125;;

   // JSON -&gt; Student
   Student *stu = [Student mj_objectWithKeyValues:dict];

   // Printing
   NSLog(@&quot;ID=%@, desc=%@, oldName=%@, nowName=%@, nameChangedTime=%@&quot;,
   stu.ID, stu.desc, stu.oldName, stu.nowName, stu.nameChangedTime);
   // ID=20, desc=kids, oldName=kitty, nowName=lufy, nameChangedTime=2013-08
   NSLog(@&quot;bagName=%@, bagPrice=%f&quot;, stu.bag.name, stu.bag.price);
   // bagName=a red bag, bagPrice=100.700000
</code></pre>
<h4 id="2.6">JSON array -> model array【将一个字典数组转成模型数组】</h4>

<pre><code>   NSArray *dictArray = @[
                     @&#123;
                         @&quot;name&quot; : @&quot;Jack&quot;,
                         @&quot;icon&quot; : @&quot;lufy.png&quot;
                     &#125;,
                     @&#123;
                         @&quot;name&quot; : @&quot;Rose&quot;,
                         @&quot;icon&quot; : @&quot;nami.png&quot;
                     &#125;
                 ];

    // JSON array -&gt; User array
    NSArray *userArray = [User mj_objectArrayWithKeyValuesArray:dictArray];

    // Printing
    for (User *user in userArray) &#123;
   NSLog(@&quot;name=%@, icon=%@&quot;, user.name, user.icon);
   &#125;
   // name=Jack, icon=lufy.png
   // name=Rose, icon=nami.png
</code></pre>
<h4 id="2.7">Model -> JSON【将一个模型转成字典】</h4>

<pre><code>   // New model
   User *user = [[User alloc] init];
   user.name = @&quot;Jack&quot;;
   user.icon = @&quot;lufy.png&quot;;

   Status *status = [[Status alloc] init];
   status.user = user;
   status.text = @&quot;Nice mood!&quot;;

   // Status -&gt; JSON
   NSDictionary *statusDict = status.mj_keyValues;
   NSLog(@&quot;%@&quot;, statusDict);
   /*
   &#123;
     text = &quot;Nice mood!&quot;;
     user =     &#123;
     icon = &quot;lufy.png&quot;;
     name = Jack;
   &#125;;
   &#125;
   */

   // More complex situation
   Student *stu = [[Student alloc] init];
   stu.ID = @&quot;123&quot;;
   stu.oldName = @&quot;rose&quot;;
   stu.nowName = @&quot;jack&quot;;
   stu.desc = @&quot;handsome&quot;;
   stu.nameChangedTime = @&quot;2018-09-08&quot;;

   Bag *bag = [[Bag alloc] init];
   bag.name = @&quot;a red bag&quot;;
   bag.price = 205;
   stu.bag = bag;

   NSDictionary *stuDict = stu.mj_keyValues;
   NSLog(@&quot;%@&quot;, stuDict);
   /*
   &#123;
   ID = 123;
   bag =     &#123;
       name = &quot;\U5c0f\U4e66\U5305&quot;;
       price = 205;
   &#125;;
   desc = handsome;
   nameChangedTime = &quot;2018-09-08&quot;;
   nowName = jack;
   oldName = rose;
   &#125;
   */
</code></pre>
<h4 id="2.8">Model array -> JSON array【将一个模型数组转成字典数组】</h4>

<pre><code>   // New model array
   User *user1 = [[User alloc] init];
   user1.name = @&quot;Jack&quot;;
   user1.icon = @&quot;lufy.png&quot;;

   User *user2 = [[User alloc] init];
   user2.name = @&quot;Rose&quot;;
   user2.icon = @&quot;nami.png&quot;;

   NSArray *userArray = @[user1, user2];

   // Model array -&gt; JSON array
   NSArray *dictArray = [User mj_keyValuesArrayWithObjectArray:userArray];
   NSLog(@&quot;%@&quot;, dictArray);
   /*
   (
   &#123;
      icon = &quot;lufy.png&quot;;
      name = Jack;
   &#125;,
   &#123;
      icon = &quot;nami.png&quot;;
      name = Rose;
   &#125;
   )
   */
</code></pre>
<h4 id="2.9">Core Data</h4>

<pre><code>   NSDictionary *dict = @&#123;
                     @&quot;name&quot; : @&quot;Jack&quot;,
                     @&quot;icon&quot; : @&quot;lufy.png&quot;,
                     @&quot;age&quot; : @20,
                     @&quot;height&quot; : @1.55,
                     @&quot;money&quot; : @&quot;100.9&quot;,
                     @&quot;sex&quot; : @(SexFemale),
                     @&quot;gay&quot; : @&quot;true&quot;
                 &#125;;

   // This demo just provide simple steps
    NSManagedObjectContext *context = nil;
    User *user = [User mj_objectWithKeyValues:dict context:context];

    [context save:nil];
 
</code></pre>
<h4 id="2.10">Coding</h4>

<pre><code>    #import &quot;MJExtension.h&quot;

    @implementation Bag
    // NSCoding Implementation
    MJExtensionCodingImplementation
    @end

    /***********************************************/

    // what properties not to be coded
    [Bag mj_setupIgnoredCodingPropertyNames:^NSArray *&#123;
   return @[@&quot;name&quot;];
    &#125;];
    // Equals: Bag.m implements +mj_ignoredCodingPropertyNames method.

    // Create model
    Bag *bag = [[Bag alloc] init];
    bag.name = @&quot;Red bag&quot;;
    bag.price = 200.8;

    NSString *file = [NSHomeDirectory()  stringByAppendingPathComponent:@&quot;Desktop/bag.data&quot;];
    // Encoding
    [NSKeyedArchiver archiveRootObject:bag toFile:file];

    // Decoding
    Bag *decodedBag = [NSKeyedUnarchiver unarchiveObjectWithFile:file];
    NSLog(@&quot;name=%@, price=%f&quot;, decodedBag.name, decodedBag.price);
    // name=(null), price=200.800000
</code></pre>
<h4 id="2.11">Camel -> underline【统一转换属性名（比如驼峰转下划线）】</h4>

<pre><code>       // Dog
       #import &quot;MJExtension.h&quot;

       @implementation Dog
       + (NSString *)mj_replacedKeyFromPropertyName121:(NSString *)propertyName
       &#123;
          // nickName -&gt; nick_name
          return [propertyName mj_underlineFromCamel];
       &#125;
       @end

       // NSDictionary
       NSDictionary *dict = @&#123;
                   @&quot;nick_name&quot; : @&quot;旺财&quot;,
                   @&quot;sale_price&quot; : @&quot;10.5&quot;,
                   @&quot;run_speed&quot; : @&quot;100.9&quot;
                   &#125;;
       // NSDictionary -&gt; Dog
       Dog *dog = [Dog mj_objectWithKeyValues:dict];

       // printing
       NSLog(@&quot;nickName=%@, scalePrice=%f runSpeed=%f&quot;, dog.nickName, dog.salePrice, dog.runSpeed);
</code></pre>
<h4 id="2.12">NSString -> NSDate, nil -> @""【过滤字典的值（比如字符串日期处理为NSDate、字符串nil处理为@""）】</h4>

<pre><code>     // Book
     #import &quot;MJExtension.h&quot;

     @implementation Book
     - (id)mj_newValueFromOldValue:(id)oldValue property:(MJProperty *)property
     &#123;
         if ([property.name isEqualToString:@&quot;publisher&quot;]) &#123;
         if (oldValue == nil) return @&quot;&quot;;
     &#125; else if (property.type.typeClass == [NSDate class]) &#123;
         NSDateFormatter *fmt = [[NSDateFormatter alloc] init];
         fmt.dateFormat = @&quot;yyyy-MM-dd&quot;;
         return [fmt dateFromString:oldValue];
     &#125;

         return oldValue;
     &#125;
     @end

     // NSDictionary
     NSDictionary *dict = @&#123;
                       @&quot;name&quot; : @&quot;5分钟突破iOS开发&quot;,
                       @&quot;publishedTime&quot; : @&quot;2011-09-10&quot;
                       &#125;;
     // NSDictionary -&gt; Book
     Book *book = [Book mj_objectWithKeyValues:dict];

     // printing
     NSLog(@&quot;name=%@, publisher=%@, publishedTime=%@&quot;, book.name, book.publisher, book.publishedTime);
</code></pre>
<h4 id="2.13">More use cases【更多用法】</h4>
* Please reference to NSObject+MJKeyValue.h and NSObject+MJCoding.h

<hr>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/ruixiaoguo/Grx.github.io.git/2015/02/19/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E6%AC%BEAndroid-App/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          从零开始开发一款Android App
        
      </div>
    </a>
  
  
    <a href="/ruixiaoguo/Grx.github.io.git/2015/01/05/MagicalRecord%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">MagicalRecord入门教程</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="JSON和模型之间转换iOS框架：MJExtension" data-title="JSON和模型之间转换iOS框架：MJExtension" data-url="https://github.com/ruixiaoguo/Grx.github.io.git/2015/01/18/JSON%E5%92%8C%E6%A8%A1%E5%9E%8B%E4%B9%8B%E9%97%B4%E8%BD%AC%E6%8D%A2iOS%E6%A1%86%E6%9E%B6%EF%BC%9AMJExtension/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2021 Grx
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/ruixiaoguo/Grx.github.io.git/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>


<script src="/ruixiaoguo/Grx.github.io.git/js/main.js"></script>







<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>